무중단 배포.
팀원들과 회의 끝에 NGINX 가 아닌 AWS를 이용하여 무중단 배포를 구현해보기로 결정
이유는 기존 자동배포와 로드밸런서를 이용한 https 서버 배포 방식을 AWS 서비스들을 이용하여 구축하였기 때문.
무중단 배포의 핵심 원리는 로드밸런서를 통해 연결된 두개 이상의 인스턴스에 트래픽을 제어해 배포하는 것.
이를 aws상에서 구현하기 위해서는 먼저 기존 원본 인스턴스의 정보를 보관할 이미지파일 생성이 필요함.
이후 AWS 에서 제공해주는 시작구성 서비스에 이미지 파일을 태그하여 값을 불러온 뒤 인스턴스 복제되고, 복제된 인스턴스가 실행될시 자동으로 복제 우분투 안에서 입력될 명령어들을 사용자 데이터 형식으로 넣어줌.
이후 오토스케일링을 통해 해당 시작구성을 태그하여 복제 인스턴스 2개를 생성 해주고 CodeDeploy의 배포방식을 현재에서 블루/그린 배포방식으로 변경.
배포가 완료되면 새로운 인스턴스가 2개 더 생성되는데 이때 기존 생성해주었던 복제 인스턴스 2개를 삭제해주면 AWS를 이용한 무중단 배포 전반적인 과정은 끝이남