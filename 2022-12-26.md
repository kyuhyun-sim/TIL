sql 쿼리를 작성하는 중 원본 테이블의 typ 칼럼에 존재하는 3종류의 type 값을 현재, 어제, 이틀전 으로 구분하여 총 9개의 컬럼을 뽑아야 되는 상황이 생겼다.
그렇게 생성된 9개의 칼럼에 각각 수치화된 값들을 합쳐주기 위해 sum을 사용해줘야 했다.
무식하게 where 절과 그룹바이로 하나의 서브쿼리를 만든뒤 해당 서브쿼리에서 출력한 값으로 하나의 칼럼을 만드는 방식을 사용하였다.
그렇게 총 9개의 같은 from 절에서 그룹바이 하는 서브쿼리를 만들어 원하는 결과를 출력할 수 있었지만 쿼리 속도가 매우 느려지는 문제가 생겼다.
최대한 적은 연산으로 같은 값을 출력할 방법이 필요했다.
case when then을 이용하여 조건을 걸어주기로 하였다.

case when (날짜 = 1일전 and type = 'A') then sum(example_count) end
이런식으로 9개의 case when 조건을 적용시켜 준뒤 null 값은 모두 그룹바이로 묶어 sum 해주는 식으로 제거해 주었다.
is not null을 사용할 생각도 해보았지만 이경우 A라는 타입에 값이 들어가있는 경우 같은열의 B나 C 타입은 null 이되는 식으로 하나의 열에는 하나의 타입 칼럼만 값을 가지고 있으므로 결국 모든 열이 삭제 되 버리는 문제가 발생한다.
